var it=Object.defineProperty;var nt=(s,e,t)=>e in s?it(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>(nt(s,typeof e!="symbol"?e+"":e,t),t),$=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var w=(s,e,t)=>($(s,e,"read from private field"),t?t.call(s):e.get(s)),d=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},z=(s,e,t,n)=>($(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t);var r=(s,e,t)=>($(s,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();let y;const st=new Uint8Array(16);function ot(){if(!y&&(y=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!y))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return y(st)}const c=[];for(let s=0;s<256;++s)c.push((s+256).toString(16).slice(1));function at(s,e=0){return c[s[e+0]]+c[s[e+1]]+c[s[e+2]]+c[s[e+3]]+"-"+c[s[e+4]]+c[s[e+5]]+"-"+c[s[e+6]]+c[s[e+7]]+"-"+c[s[e+8]]+c[s[e+9]]+"-"+c[s[e+10]]+c[s[e+11]]+c[s[e+12]]+c[s[e+13]]+c[s[e+14]]+c[s[e+15]]}const ht=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),K={randomUUID:ht};function rt(s,e,t){if(K.randomUUID&&!e&&!s)return K.randomUUID();s=s||{};const n=s.random||(s.rng||ot)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=n[i];return e}return at(n)}var C,N;class ct{constructor(e){d(this,C);a(this,"interval");a(this,"lastUpdate");a(this,"intervalTime");a(this,"updaterItems",{});a(this,"firstUpdaterItems",{});this.updaterItems={},this.intervalTime=e}addToFirst(e,t,n){this.firstUpdaterItems[e]={updateFunction:t,context:n}}add(e,t,n){this.updaterItems[e]={updateFunction:t,context:n}}start(){clearInterval(this.interval),this.lastUpdate=Date.now(),this.interval=setInterval(()=>r(this,C,N).call(this),this.intervalTime)}stop(){clearInterval(this.interval)}remove(e){delete this.updaterItems[e]}removeAll(){this.firstUpdaterItems={},this.updaterItems={}}}C=new WeakSet,N=function(){const e=Date.now(),t=(e-this.lastUpdate)/this.intervalTime;this.lastUpdate=e;const n=Object.keys(this.firstUpdaterItems);for(const o of n){const h=this.firstUpdaterItems[o].updateFunction,p=this.firstUpdaterItems[o].context;h.apply(p,[t])}const i=Object.keys(this.updaterItems);for(const o of i){const h=this.updaterItems[o].updateFunction,p=this.updaterItems[o].context;h.apply(p,[t])}};const A=new ct(16.6);class V{constructor(e,t){a(this,"id");a(this,"element");this.id=rt(),this.canvas=e,this.drawingCanvas=t,A.add(`${this.id}_update`,this.update,this),A.add(`${this.id}_draw`,this.draw,this)}draw(){}changeNative(e,t){this.element.param=t}update(e){}}var u,f;const H=class H extends V{constructor(t,n,i){super(t,n);d(this,u);a(this,"paint");a(this,"direction");a(this,"length");a(this,"rotation");a(this,"startPosition");a(this,"endPosition");a(this,"childrens",[]);a(this,"prevEndPosition");if(this.settings=i,this.startPosition={x:i.x1,y:i.y1},this.direction=i.direction,this.length=i.length,this.rotation=i.rotation,this.speed=i.speed,this.paint=i.paint,this.color=i.color,this.endPosition=r(this,u,f).call(this),this.prevEndPosition=this.endPosition,i.childrens){this.childrens=[];for(const o of i.childrens){const h=this.endPosition;this.childrens.push(new H(t,this.drawingCanvas,{startPosition:h,...o}))}}}draw(){const t=r(this,u,f).call(this),n=this.canvas.getContext("2d");if(n.strokeStyle=`rgb(${this.color.red}, ${this.color.green}, ${this.color.blue})`,n.beginPath(),n.moveTo(this.startPosition.x,this.startPosition.y),n.lineTo(t.x,t.y),n.stroke(),n.closePath(),this.paint){const i=this.drawingCanvas.getContext("2d");i.strokeStyle=`rgb(${this.color.red}, ${this.color.green}, ${this.color.blue})`,i.beginPath(),i.moveTo(this.prevEndPosition.x,this.prevEndPosition.y),i.lineTo(t.x,t.y),i.stroke(),this.prevEndPosition=t}for(let i of this.childrens)i.draw()}update(t){this.direction+=this.speed*(this.rotation==="right"?1:-1)/100,this.endPosition=r(this,u,f).call(this);for(let n of this.childrens)n.startPosition=this.endPosition,n.update(t)}};u=new WeakSet,f=function(){const t=this.direction*Math.PI/180;return{x:this.startPosition.x+this.length*Math.cos(t),y:this.startPosition.y+this.length*Math.sin(t)}};let v=H;var M,F;const j=class j extends v{constructor(t,n,i){const o=i.childrens;i.childrens=[];super(t,n,i);d(this,M);a(this,"lengthSpeedChange",Math.max(.01,Math.random()));a(this,"maxLength",Math.random()*300);if(o){this.childrens=[];for(const h of o){const p=this.endPosition;this.childrens.push(new j(t,this.drawingCanvas,{startPosition:p,...h}))}}}draw(){const t=r(this,M,F).call(this),n=this.canvas.getContext("2d");if(n.strokeStyle=`rgb(${this.color.red}, ${this.color.green}, ${this.color.blue})`,n.beginPath(),n.moveTo(this.startPosition.x,this.startPosition.y),n.lineTo(t.x,t.y),n.stroke(),n.closePath(),this.paint){const i=this.drawingCanvas.getContext("2d");i.strokeStyle=`rgb(${this.color.red}, ${this.color.green}, ${this.color.blue})`,i.beginPath(),i.moveTo(this.prevEndPosition.x,this.prevEndPosition.y),i.lineTo(t.x,t.y),i.stroke(),this.prevEndPosition=t}for(let i of this.childrens)i.draw()}update(t){this.length=this.length+this.lengthSpeedChange,this.length>=this.maxLength&&(this.length=0),this.direction+=this.speed*(this.rotation==="right"?1:-1)/100,this.endPosition=r(this,M,F).call(this);for(let n of this.childrens)n.startPosition=this.endPosition,n.update(t)}};M=new WeakSet,F=function(){const t=this.direction*Math.PI/180;return{x:this.startPosition.x+this.length*Math.cos(t),y:this.startPosition.y+this.length*Math.sin(t)}};let O=j;class R{constructor(e){a(this,"sceneItems");a(this,"appController");a(this,"drawingCanvas");a(this,"maxTime",5);a(this,"timer",0);a(this,"canvas");if(!e)throw new Error("There is has not controller");this.appManager=e,this.canvas=this.appManager.canvas,this.drawingCanvas=this.appManager.drawingCanvas,this.sceneItems=[]}initialize(){const e=this;function t(n){e.onClick(n)}this._onClick=t,this.canvas.addEventListener("mousedown",t)}onClick(e){}clear(){this.canvas.removeEventListener("mousedown",this._onClick),this.sceneItems=[],this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height)}getRandomChild(e){const t={length:10+Math.random()*100,direction:Math.random()*360,rotation:Math.random()>.5?"right":"left",color:{red:Math.floor(Math.random()*255),green:Math.floor(Math.random()*255),blue:Math.floor(Math.random()*255)},speed:Math.random()*100,paint:Math.random()>.2?"endPosition":void 0,childrens:[]},n=Math.floor(Math.random()*e);for(let i=0;i<n;i++)t.childrens.push(this.getRandomChild(e-1));return t}update(e){this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height)}}class dt extends R{constructor(e){super(e)}onClick(e){console.log("dzenScene","На месте");const t={x1:e.x,y1:e.y,length:0,direction:Math.random()*360,rotation:"left",color:{red:255,green:255,blue:255},speed:5+Math.random()*100,paint:"endPosition",childrens:[]},n=new O(this.canvas,this.drawingCanvas,t);this.sceneItems.push(n)}}class lt extends R{constructor(e){super(e)}onClick(e){console.log("mainScene","На месте");const t={x1:e.x,y1:e.y,length:10+Math.random()*200,direction:Math.random()*360,rotation:"right",color:{red:Math.floor(Math.random()*255),green:Math.floor(Math.random()*255),blue:Math.floor(Math.random()*255)},speed:Math.random()*100,paint:Math.random()>.2?"endPosition":void 0,childrens:[]},n=Math.floor(1+Math.random()*3);for(let o=0;o<n;o++)t.childrens.push(this.getRandomChild(3));const i=new v(this.canvas,this.drawingCanvas,t);this.sceneItems.push(i)}}var P,q;class pt extends v{constructor(t,n,i){super(t,n,i);d(this,P);a(this,"lengthSpeedChange",(Math.random()-1)/10);a(this,"maxLength",Math.random()*300)}update(t){Math.abs(this.length)>this.maxLength&&(this.lengthSpeedChange=-this.lengthSpeedChange,this.length=Math.sign(this.length)*this.maxLength),this.length+=this.lengthSpeedChange,this.length**=-2,this.direction+=this.speed*(this.rotation==="right"?1:-1)/100,this.endPosition=r(this,P,q).call(this);for(let n of this.childrens)n.startPosition=this.endPosition,n.update(t)}}P=new WeakSet,q=function(){const t=this.direction*Math.PI/180;return{x:this.startPosition.x+this.length*Math.cos(t),y:this.startPosition.y+this.length*Math.sin(t)}};class gt extends R{constructor(e){super(e)}getRandomChild(e){const t={length:10+Math.random()*200,direction:Math.random()*360,rotation:Math.random()>.5?"right":"left",color:{red:Math.floor(Math.random()*255),green:Math.floor(Math.random()*255),blue:Math.floor(Math.random()*255)},speed:Math.random()*100,paint:Math.random()>.2?"endPosition":void 0,childrens:[]},n=Math.floor(Math.random()*e);for(let i=0;i<n;i++)t.childrens.push(this.getRandomChild(e-1));return t}onClick(e){const t={x1:e.x,y1:e.y,length:10+Math.random()*300,direction:Math.random()*360,rotation:"right",color:{red:Math.floor(Math.random()*255),green:Math.floor(Math.random()*255),blue:Math.floor(Math.random()*255)},speed:Math.random()*100,paint:Math.random()>.2?"endPosition":void 0,childrens:[]},n=Math.floor(1+Math.random()*3);for(let o=0;o<n;o++)t.childrens.push(this.getRandomChild(4));const i=new pt(this.canvas,this.drawingCanvas,t);this.sceneItems.push(i)}update(e){if(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.timer>this.maxTime){const n=this.drawingCanvas.getContext("2d");n.fillStyle="rgba(0, 0, 0, 0.09)",n.fillRect(0,0,this.canvas.width,this.canvas.height),this.timer%=this.maxTime}this.timer+=e}}const l={x:0,y:0};document.addEventListener("mousemove",s=>{l.x=s.x,l.y=s.y});var S,X,x,B;class W extends V{constructor(t,n,i){super(t,n);d(this,S);d(this,x);a(this,"color");a(this,"direction");a(this,"radius");a(this,"position");a(this,"direction",Math.random()*360*Math.PI/180);a(this,"changeDirection",.01);this.settings=i,this.position={x:i.positionX,y:i.positionY},this.radius=i.radius}draw(){const t=this.canvas.getContext("2d");t.beginPath(),t.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI,!0),t.fillStyle="rgba(255, 255, 255, 0.1)",t.fill();for(let i=0;i<5;i++)t.beginPath(),t.arc(this.position.x,this.position.y,this.radius+i*.3,0,2*Math.PI,!0),t.fillStyle="rgba(255, 255, 255, 0.1)",t.fill();const n=r(this,x,B).call(this);n<100&&(t.beginPath(),t.moveTo(this.position.x,this.position.y),t.lineTo(l.x,l.y),t.lineWidth=1,t.strokeStyle=`rgba(255, 255, 255, ${(100-n)/100})`,t.stroke())}update(t){const n=r(this,x,B).call(this);if(this.changeDirection=(this.changeDirection+Math.random()/500-1/1e3)%.01,this.direction=(this.direction+this.changeDirection)%Math.PI,this.position.y+=Math.sin(this.direction)*.1,this.position.x+=Math.cos(this.direction)*.1,n<100){const i=r(this,S,X).call(this,this.position.x,this.position.y,l.x,l.y);this.direction=i,this.position.y+=Math.sin(i)*(100-n)**1.5/1e3,this.position.x+=Math.cos(i)*(100-n)**1.5/1e3}}}S=new WeakSet,X=function(t,n,i,o){var h=o-n,p=i-t,m=Math.atan2(h,p);return m*=180/Math.PI,m<0&&(m=360+m),m*Math.PI/180},x=new WeakSet,B=function(){return Math.sqrt((this.position.x-l.x)**2+(this.position.y-l.y)**2)};var I,Y;class _ extends R{constructor(t){super(t);d(this,I)}initialize(){const t=this;function n(i){t.onClick(i)}this._onClick=n,this.canvas.addEventListener("mousedown",n);for(let i=0;i<300;i++){const o={positionX:Math.random()*this.canvas.width,positionY:Math.random()*this.canvas.height,radius:1},h=new W(this.canvas,this.drawingCanvas,o);this.sceneItems.push(h)}}onClick(t){const n={positionX:t.x,positionY:t.y,radius:2},i=new W(this.canvas,this.drawingCanvas,n);this.sceneItems.push(i)}update(t){const n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height);for(let i=0;i<this.sceneItems.length;i++)for(let o=0;o<this.sceneItems.length;o++){if(i===o)continue;const h=r(this,I,Y).call(this,this.sceneItems[i].position.x,this.sceneItems[i].position.y,this.sceneItems[o].position.x,this.sceneItems[o].position.y);h<100&&(n.beginPath(),n.moveTo(this.sceneItems[i].position.x,this.sceneItems[i].position.y),n.lineTo(this.sceneItems[o].position.x,this.sceneItems[o].position.y),n.lineWidth=1,n.strokeStyle=`rgba(255, 255, 255, ${(100-h)/100})`,n.stroke())}}}I=new WeakSet,Y=function(t,n,i,o){return Math.sqrt((t-i)**2+(n-o)**2)};const ut=s=>{const e=document.getElementById("main-scene"),t=document.getElementById("dzen-scene"),n=document.getElementById("psyco-scene"),i=document.getElementById("dots-scene");e.addEventListener("mousedown",()=>{s.startScene(lt)}),t.addEventListener("mousedown",()=>{s.startScene(dt)}),n.addEventListener("mousedown",()=>{s.startScene(gt)}),i.addEventListener("mousedown",()=>{s.startScene(_)}),s.startScene(_)},mt={realativeFactor:1/100},vt={width:window.innerWidth,height:window.innerHeight};class Mt{constructor(e){a(this,"scene");a(this,"appManager");if(!e)throw new Error("There is has not appManager");this.appManager=e,this.appManager.bindController(this)}startScene(e){this.scene&&(this.scene.clear(),this.appManager.removeScene(this.scene)),this.scene=new e(this.appManager),this.appManager.initializeScene(this.scene)}}var E,g,T,G,b,J,U,Q,D,Z,k,tt,L,et;class xt{constructor(e,t,n){d(this,T);d(this,b);d(this,U);d(this,D);d(this,k);d(this,L);a(this,"app");a(this,"canvas");a(this,"appSettings");a(this,"canvasSettings");d(this,E,void 0);d(this,g,void 0);if(!e)throw new Error("There is not has appElement");this.app=e,this.appSettings=t,this.canvasSettings=n,r(this,L,et).call(this),r(this,D,Z).call(this),r(this,k,tt).call(this),r(this,T,G).call(this)}bindController(e){z(this,E,e)}initializeScene(e){e.initialize(),w(this,g).addToFirst("__scene",e.update,e)}removeScene(e){e.clear(),w(this,g).removeAll(),r(this,b,J).call(this),r(this,U,Q).call(this)}appendToApp(e){this.app.appendChild(e)}}E=new WeakMap,g=new WeakMap,T=new WeakSet,G=function(){z(this,g,A),w(this,g).start()},b=new WeakSet,J=function(){this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height)},U=new WeakSet,Q=function(){this.drawingCanvas.getContext("2d").clearRect(0,0,this.drawingCanvas.width,this.drawingCanvas.height)},D=new WeakSet,Z=function(){var e,t;if(!((e=this.canvasSettings)!=null&&e.width))throw new Error("There is has not canvasWidth");if(!((t=this.canvasSettings)!=null&&t.height))throw new Error("There is has not canvasHeight");this.canvas=document.createElement("canvas"),this.canvas.id="main-canvas",this.canvas.width=this.canvasSettings.width,this.canvas.height=this.canvasSettings.height,this.canvas.innerHTML="Canvas Element",this.appendToApp(this.canvas)},k=new WeakSet,tt=function(){var e,t;if(!((e=this.canvasSettings)!=null&&e.width))throw new Error("There is has not canvasWidth");if(!((t=this.canvasSettings)!=null&&t.height))throw new Error("There is has not canvasHeight");this.drawingCanvas=document.createElement("canvas"),this.drawingCanvas.id="drawing-canvas",this.drawingCanvas.width=this.canvasSettings.width,this.drawingCanvas.height=this.canvasSettings.height,this.drawingCanvas.innerHTML="Canvas Drawing Element",this.appendToApp(this.drawingCanvas)},L=new WeakSet,et=function(){};const wt=document.getElementById("app"),yt=new xt(wt,mt,vt),ft=new Mt(yt);ut(ft);
